# Ejercicio 1. Buscar una aplicación de ejemplo, preferiblemente propia, y deducir que patrón es el que usa. ¿Qué habría que hacer para evolucionar a un patrón tipo microservicios?

La aplicación que he escogido, siguiendo la recomendación del enunciado, es la que desarrollé como TFG, llamada [MURAT](https://github.com/Anglepi/TFG-MURAT) (Multiagent Urban Traffic Control).

Esta aplicación consiste, tal y como su nombre indica, en un sistema multiagente cuyo objetivo es la gestión del tráfico, con agentes representando semáforos, que obecen a aquellos que representan cruces y estos a su vez son subordinados a otro agente que permitirá la comunicación entre cruces para aportar más información a estos del tráfico que les rodea.

El sistema actualmente tiene funcionalidades sencillas de gestión de tráfico, que simplemente se basan en modificar los tiempos que los semáforos permiten el paso para adaptarse a aquellas calles que tengan más flujo de vehículos y se minimice el tiempo de espera de éstos.

Para que este sistema evolucione a uno de tipo microservicios, podríamos dar de alta a cada agente Cruce como un microservicio, pero manteniendo su identidad de Agente que coordina sus semáforos. Su funcionalidad como microservicio consiste en que respondería a las consultas sobre el flujo del tráfico hechas por los cruces adyacentes para así permitir a los cruces una visión mas amplía del estado del tráfico por su zona, y su adaptación a esto sea más precisa.

Esta primera observación sobre la adaptación de la arquitectura de MURAT a una basada en microservicios, nos puede hacer llegar a pensar que toda comunicación entre agentes puede hacerse mediante microservicios, pero quizás no sea lo más adecuado. El sistema multiagente de MURAT se ayuda de su red interna de comunicación que permite el paso de mensajes entre agentes, y como esta red únicamente se puede usar dentro del sistema multiagente (entre otros aspectos), no creo que el sistema de comunicación que implementa pueda llegar si quiera a compararse con el concepto de microservicios. Sin embargo, si es posible que tenga sentido implementar en los agentes algún tipo de microservicio para servirse de sus sensores de tráfico, ya que esta información no es útil únicamente para los agentes, si no que puede utilizarse en otras muchas aplicaciones tales como el navegador de un coche.

También se pueden incluir microservicios que no sean exclusivamente de consulta de información, si no que sean para lograr que el agente actúe de cierta manera segun se le pueda solicitar mediante su microservicio. Estos microservicios, evidentemente, deberán tener un altísimo nivel de seguridad, y no deben permitir responder a las ordenes de cualquiera, ya que no todo el mundo debería poder influenciar en el funcionamiento de los semáforos puesto que puede poner vidas en riesgo.

Como ejemplo, se pueden implementar servicios que puedan ser utilizados por las autoridades en momentos en los que haya que controlar el tráfico de manera manual debido a alguna causa externa. Estos servicios identifican al personal de las autoridades tras lo cual aceptan sus ordenes y modifican el estado de los semáforos según se les ordene

Otro ejemplo sería el de un microservicio que escuche la posición y ruta de un vehículo de emergencias que esté en camino a atender alguna situación. Este servicio podría responder con modificaciones de rutas en función del tráfico, como haría cualquier navegador (salvo que quizás los agentes Cruce tengan información más fiable) e incluso influir en los semáforos para ir despejando de manera proactiva la ruta que va a tomar el vehículo.

En conclusión, teniendo en cuenta la naturaleza del sistema, los microservicios que se pueden implementar son aquellos que ofrezcan datos a quien los solicite, y aquellos microservicios que requieran una entrada de datos estarán restringidos al uso exclusivo de las autoridades, puesto que una entrada de datos seguramente signifique que desean que el sistema altere su comportamiento, y no todo el mundo debería poder alterar el comportamiento de un sistema que pone vidas en juego. La comunicacion interna entre el sistema, por motivos parecidos, es más adecuado que permanezca tal y como está, ya que si incluimos una capa de microservicios para comunicar agentes entre sí, puede que los mensajes no sean tan instantáneos, lo que podría derivar en un semáforo no cambiando de color a tiempo y causando un accidente. 